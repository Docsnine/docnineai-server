# ─────────────────────────────────────────────────────────────
# Docnine v3 — Environment Variables
# Copy this file to .env and fill in your values.
# NEVER commit .env to version control.
#
# Minimum required to start:
#   MONGODB_URI, GROQ_API_KEY,
#   JWT_ACCESS_SECRET, JWT_REFRESH_SECRET, ENCRYPTION_KEY
# ─────────────────────────────────────────────────────────────

# ── Server ────────────────────────────────────────────────────
NODE_ENV=development
PORT=3000

# URL of your frontend (used for CORS + OAuth redirect)
FRONTEND_URL=http://localhost:3000
APP_URL=http://localhost:3000

# ── MongoDB ───────────────────────────────────────────────────
# Local:  mongodb://localhost:27017/project-documentor
# Atlas:  mongodb+srv://<user>:<pass>@cluster.mongodb.net/project-documentor
MONGODB_URI=mongodb://localhost:27017/project-documentor

# ── JWT ───────────────────────────────────────────────────────
# REQUIRED. Both values must be different. Minimum 32 characters.
# Access token:  15 min lifetime, sent in response body
# Refresh token: 7 day lifetime, sent as httpOnly Secure cookie
#
# Generate:
#   node -e "console.log(require('crypto').randomBytes(48).toString('hex'))"
JWT_ACCESS_SECRET=replace_with_a_long_random_string_minimum_32_chars
JWT_REFRESH_SECRET=replace_with_a_different_long_random_string_32_chars

# ── Encryption (GitHub OAuth token storage) ───────────────────
# REQUIRED if using GitHub OAuth. Exactly 64 hex chars = 32 bytes (AES-256-GCM).
#
# Generate:
#   node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
ENCRYPTION_KEY=replace_with_exactly_64_hex_characters_here_0000000000000000

# ── Groq AI (pipeline engine) ─────────────────────────────────
# REQUIRED for the documentation pipeline.
# Free tier available at https://console.groq.com
GROQ_API_KEY=gsk_your_groq_api_key_here

# ── GitHub ────────────────────────────────────────────────────
# Personal access token — raises rate limit from 60 → 5000 req/hr.
# Scopes: public_repo  (public repos only)
#         repo          (public + private repos)
GITHUB_TOKEN=ghp_your_personal_access_token

# OAuth App credentials — required for /github/oauth/* (repo picker)
# Create at: https://github.com/settings/developers → OAuth Apps
# Authorization callback URL must exactly match GITHUB_REDIRECT_URI below.
GITHUB_CLIENT_ID=your_github_oauth_app_client_id
GITHUB_CLIENT_SECRET=your_github_oauth_app_client_secret
GITHUB_REDIRECT_URI=http://localhost:3000/github/oauth/callback

# ── SMTP Email ────────────────────────────────────────────────
# Optional — if unset, emails are logged to the console (dev mode).
# SendGrid: SMTP_HOST=smtp.sendgrid.net  SMTP_USER=apikey  SMTP_PASS=SG.xxx
# Gmail:    SMTP_HOST=smtp.gmail.com      SMTP_USER=you@gmail.com  SMTP_PASS=<app-password>
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=
EMAIL_FROM=Project Documentor <noreply@project-documentor.dev>

# ── Webhook (optional) ────────────────────────────────────────
# HMAC secret for validating GitHub push webhooks.
# Set any random string here and use the same value when registering
# the webhook at github.com → Settings → Webhooks.
WEBHOOK_SECRET=

# ── Notion export (optional) ──────────────────────────────────
# Create an integration at https://notion.so/my-integrations
# Share a page with the integration and copy its ID.
NOTION_API_KEY=
NOTION_PARENT_PAGE_ID=

# ── Token / context tuning (optional) ────────────────────────
# These control how the AI pipeline chunks and batches code.
CHUNK_SIZE=400          # tokens per LLM chunk (default 400)
BATCH_SIZE=5            # chunks per LLM call  (default 5)
MAX_FILES_PER_REPO=100  # max files fetched    (default 100)
MAX_FILE_SIZE_KB=50     # skip files larger than this (default 50)